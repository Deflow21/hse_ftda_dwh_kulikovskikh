# Домашнее задание 2

## Описание проекта

## Задачи

1. **Реализация архитектуры DWH**:
   - Выбрана архитектура **Data Vault 2.0**, поскольку она хорошо подходит для моделирования источников данных с высокой степенью изменений и обеспечивает версионирование данных, легкость адаптации под изменения источников данны и поддержку insert-only подхода (данные не удаляются и не обновляются).
   - Написан DDL для детального слоя DWH.
   - Составлена ER-диаграмма для DWH

2. **Поднятие нового инстанса PostgreSQL для DWH**:
   - Создан контейнер для DWH в `docker-compose.yaml`.
   - Инициализирована структура детального слоя DWH в схеме `dwh_detailed` с техническими полями.

3. **Интеграция Debezium**:
   - Настроен Debezium для отслеживания изменений в master-хосте.
   - Изменения передаются в Kafka.

4. **Реализация DMP-сервиса**:
   - Написан Python-скрипт, который читает данные из Kafka, подготавливает их и вставляет в DWH.
   - DMP-сервис упакован в Docker-контейнер.

5. **ER-диаграмма**:
   - доступна в репозитории.

---

## Инструкция по запуску

### Шаг 1: Клонирование репозитория
```bash
git clone -b hw_2 https://github.com/ваш-репозиторий.git
cd ваш-репозиторий
```


### Шаг 2: Запуск
```bash
docker-compose up --build
```

### Шаг 4: Проверка
На мастере и на реплике с посмощью 
```bash
SELECT * FROM bookings;
```
Кафка
```bash
docker exec -it kafka kafka-topics.sh --list --bootstrap-server kafka:9092
```
DWH 
```bash
SELECT * FROM dwh_detailed.hub_airports;
```
DMP-сервис
```bash
docker logs dmp_service
```

Домашка конечно атас, большую часть времени потратил на фиксы и вроде все исправил, но не уверен честно говоря ;)
